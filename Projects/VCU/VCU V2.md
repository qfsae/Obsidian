# Version 2 Iteration of the Vehicle Control Unit

## Changelog
Changelog from V1
- Added in relay/MOSFET control for coolant pumps
- Updated power rails/conversion to support 24V
- Added 24V -> 12V Buck Converter
- Added EEPROM
- Shift registers moved onto single SPI bus with CS (latch) pins
- Added two 7 segment displays for error reporting
- Fixed Indication light resistors
- Added Indication lights for load switches
- Changed CAN Bus transceivers
- Added I2C Current Sensors for all power rails
- Added Fusing for Battery inputs / high current outputs
- Added Fusing as galvanic isolation for all power rails
- Reduced board size to 115x130 mm
- Increased current output to 3A on all power outputs

## Technical Notes
The VCU consists of 3 components that can be split into 9 subsections: Sensor Input, Debug Output, and Power Distribution. 
Sensory input consists of the digital and analogue inputs across all voltage ranges. 
Debug output consists of two seven segment displays and four LEDs. Debug outputs are connected directly to MCU GPIO pins with the intention that they can be used with the most basic level of code.  
Power distribution consists of the voltage regulation units, load switches, and PWM controlled high power outputs.

#### Sensory Inputs
The VCU features 6 12V analogue inputs, 4 5V analogue inputs, and 4 12V digital inputs.
Digital inputs are rated for 12V and go through a 60.4/100 k Ohm voltage divider. 12V analogue inputs go through the same voltage divider but also feature a 0.1uF capacitor to reduce input impedance to the STM32's ADCs.
5V analogue inputs use a 60.4/22 k Ohm voltage divider and a 0.1uF capacitor similar to the 12V analogue inputs.

Digital sensory inputs are connected to STM32 Timer pins. The intention is that they can be used to measure the PWM signals generated by the wheel speed sensors.

#### Debug Outputs
The board has several debug outputs from USART COMM ports and SWD to LED indicators.

##### COMM Ports
Four USART COMM ports are exposed. The design intention is for USART 2 to be used as a primary debug port, with `printf` calls being forwarded through it, while the other three USART ports (3, 5, 6) are used for task specific information and live data for test bench tuning.
Ports Available:
- USART 2
- USART 3
- UART 5
- USART 6

The board also features Serial Wire Debug (SWD) for on chip debugging and flashing firmware.

##### LED Indication
